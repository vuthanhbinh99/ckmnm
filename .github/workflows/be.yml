name: ğŸš€ Deploy Backend (PHP) - FreeHostingNoAds

on:
  push:
    branches:
      - main
    # Chá»‰ cháº¡y khi cÃ³ thay Ä‘á»•i trong thÆ° má»¥c 'backend/'
    paths:
      - 'backend/**' 

jobs:
  deploy_backend:
    runs-on: ubuntu-latest
    environment: production_backend

    steps:
    - name: â¬‡ï¸ Checkout MÃ£ Nguá»“n
      uses: actions/checkout@v4
      
    - name: ğŸ“‚ Triá»ƒn khai qua FTP
      uses: SamKirkland/FTP-Deploy-Action@v4.3.0
      with:
        server: ${{ secrets.BE_HOST }}
        username: ${{ secrets.BE_USERNAME }}
        password: ${{ secrets.BE_PASSWORD }}
        
        # Äáº©y thÆ° má»¥c cá»¥c bá»™ 'backend'
        local-dir: './backend/'
        
        # ÄÆ°á»ng dáº«n Ä‘Ã­ch trÃªn host (ÄÃ£ Ä‘Æ°á»£c cáº­p nháº­t)
        server-dir: ${{ secrets.BE_TARGET_DIR }}
        
        protocol: ftp 
        port: 21 

    - name: âœ… Triá»ƒn khai Backend hoÃ n táº¥t
      run: echo "Backend deployed to FreeHostingNoAds successfully!"
